<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Field Buddy - Data Capture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            padding: 0;
            margin: 0;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
        }
        
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 4px;
            font-weight: 600;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 13px;
            font-weight: 400;
        }
        
        .form-content {
            padding: 30px 20px 120px 20px;
        }
        
        .section {
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .section:last-child {
            border-bottom: none;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }
        
        .subsection-title {
            font-size: 15px;
            font-weight: 600;
            color: #555;
            margin: 25px 0 15px 0;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-weight: 500;
            color: #444;
            margin-bottom: 6px;
            font-size: 14px;
        }
        
        input[type="text"],
        input[type="number"],
        input[type="date"],
        input[type="time"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.2s, box-shadow 0.2s;
            font-family: inherit;
        }
        
        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 8px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .checkbox-item label {
            margin: 0;
            cursor: pointer;
            font-weight: normal;
            color: #555;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }
        
        .action-buttons {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px 20px;
            border-top: 2px solid #e0e0e0;
            display: flex;
            gap: 10px;
            max-width: 900px;
            margin: 0 auto;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }
        
        button {
            flex: 1;
            padding: 14px;
            font-size: 15px;
            font-weight: 600;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-primary:active {
            transform: scale(0.98);
        }
        
        .btn-secondary {
            background: #95a5a6;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #7f8c8d;
        }
        
        .btn-secondary:active {
            transform: scale(0.98);
        }
        
        @media (max-width: 600px) {
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
            
            .form-content {
                padding: 20px 15px 120px 15px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }
        
        .required {
            color: #e74c3c;
            margin-left: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Field Buddy Data Capture</h1>
            <p>HVAC Service Call Documentation System</p>
        </div>
        
        <div class="form-content">
            <form id="fieldBuddyForm">
                
                <!-- Job Context -->
                <div class="section">
                    <h2 class="section-title">Job Context</h2>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Date <span class="required">*</span></label>
                            <input type="date" name="date" required>
                        </div>
                        <div class="form-group">
                            <label>Time Arrived <span class="required">*</span></label>
                            <input type="time" name="timeArrived" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Technician Name <span class="required">*</span></label>
                        <input type="text" name="techName" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Customer Name <span class="required">*</span></label>
                        <input type="text" name="customerName" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Address <span class="required">*</span></label>
                        <input type="text" name="address" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Account Number</label>
                        <input type="text" name="accountNumber">
                    </div>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Ambient Temperature (Â°F)</label>
                            <input type="number" name="ambientTemp" step="0.1">
                        </div>
                        <div class="form-group">
                            <label>Ambient Humidity (%)</label>
                            <input type="number" name="ambientRH" step="1">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Call Type</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="callNoCool" name="callType" value="No Cool">
                                <label for="callNoCool">No Cool</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="callNoHeat" name="callType" value="No Heat">
                                <label for="callNoHeat">No Heat</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="callMaint" name="callType" value="Maintenance">
                                <label for="callMaint">Maintenance</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="callSecond" name="callType" value="Second Opinion">
                                <label for="callSecond">Second Opinion</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="callOther" name="callType" value="Other">
                                <label for="callOther">Other</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Equipment Identification -->
                <div class="section">
                    <h2 class="section-title">Equipment Identification</h2>
                    
                    <h3 class="subsection-title">Indoor Unit</h3>
                    
                    <div class="form-group">
                        <label>Manufacturer</label>
                        <input type="text" name="indoorMfg">
                    </div>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Model Number</label>
                            <input type="text" name="indoorModel">
                        </div>
                        <div class="form-group">
                            <label>Serial Number</label>
                            <input type="text" name="indoorSerial">
                        </div>
                    </div>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Tonnage</label>
                            <input type="number" name="tonnage" step="0.5" placeholder="e.g., 3.0">
                        </div>
                        <div class="form-group">
                            <label>Filter Size</label>
                            <input type="text" name="filterSize" placeholder="e.g., 16x25x1">
                        </div>
                    </div>
                    
                    <h3 class="subsection-title">Outdoor Unit</h3>
                    
                    <div class="form-group">
                        <label>Manufacturer</label>
                        <input type="text" name="outdoorMfg">
                    </div>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Model Number</label>
                            <input type="text" name="outdoorModel">
                        </div>
                        <div class="form-group">
                            <label>Serial Number</label>
                            <input type="text" name="outdoorSerial">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Refrigerant Type</label>
                        <select name="refrigerantType">
                            <option value="">Select...</option>
                            <option value="R-22">R-22</option>
                            <option value="R-410A">R-410A</option>
                            <option value="R-32">R-32</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>

                <!-- System Performance Data -->
                <div class="section">
                    <h2 class="section-title">System Performance Data</h2>
                    
                    <h3 class="subsection-title">Airflow & Static Pressure</h3>
                    
                    <div class="grid-3">
                        <div class="form-group">
                            <label>Return Static (in. w.c.)</label>
                            <input type="number" name="returnStatic" step="0.01" placeholder="e.g., 0.15">
                        </div>
                        <div class="form-group">
                            <label>Supply Static (in. w.c.)</label>
                            <input type="number" name="supplyStatic" step="0.01" placeholder="e.g., 0.25">
                        </div>
                        <div class="form-group">
                            <label>Total Static (in. w.c.)</label>
                            <input type="number" name="totalStatic" step="0.01" placeholder="e.g., 0.40">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Filter Condition</label>
                        <select name="filterCondition">
                            <option value="">Select...</option>
                            <option value="Clean">Clean</option>
                            <option value="Dirty">Dirty</option>
                            <option value="Overdue">Overdue</option>
                            <option value="Missing">Missing</option>
                        </select>
                    </div>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Blower Amps (Actual)</label>
                            <input type="number" name="blowerAmps" step="0.1" placeholder="e.g., 5.2">
                        </div>
                        <div class="form-group">
                            <label>Blower Amps (Rated)</label>
                            <input type="number" name="blowerAmpsRated" step="0.1" placeholder="e.g., 5.5">
                        </div>
                    </div>

                    <h3 class="subsection-title">Refrigerant Circuit</h3>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Suction Pressure (psig)</label>
                            <input type="number" name="suctionPressure" step="0.1" placeholder="e.g., 110.0">
                        </div>
                        <div class="form-group">
                            <label>Head Pressure (psig)</label>
                            <input type="number" name="headPressure" step="0.1" placeholder="e.g., 270.0">
                        </div>
                    </div>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Suction Line Temp (Â°F)</label>
                            <input type="number" name="suctionTemp" step="0.1" placeholder="e.g., 56.0">
                        </div>
                        <div class="form-group">
                            <label>Liquid Line Temp (Â°F)</label>
                            <input type="number" name="liquidTemp" step="0.1" placeholder="e.g., 95.0">
                        </div>
                    </div>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Superheat (Â°F)</label>
                            <input type="number" name="superheat" step="0.1" placeholder="e.g., 16.0">
                        </div>
                        <div class="form-group">
                            <label>Subcool (Â°F)</label>
                            <input type="number" name="subcool" step="0.1" placeholder="e.g., 3.0">
                        </div>
                    </div>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Compressor Amps (Actual)</label>
                            <input type="number" name="compAmps" step="0.1" placeholder="e.g., 7.0">
                        </div>
                        <div class="form-group">
                            <label>Compressor Amps (Rated)</label>
                            <input type="number" name="compAmpsRated" step="0.1" placeholder="e.g., 7.2">
                        </div>
                    </div>

                    <h3 class="subsection-title">Temperature Performance</h3>
                    
                    <div class="grid-3">
                        <div class="form-group">
                            <label>Return Air (Â°F)</label>
                            <input type="number" name="returnTemp" step="0.1" placeholder="e.g., 75.0">
                        </div>
                        <div class="form-group">
                            <label>Supply Air (Â°F)</label>
                            <input type="number" name="supplyTemp" step="0.1" placeholder="e.g., 58.0">
                        </div>
                        <div class="form-group">
                            <label>Temp Split (Â°F)</label>
                            <input type="number" name="tempSplit" step="0.1" placeholder="Auto-calculated">
                        </div>
                    </div>
                </div>

                <!-- Visual Inspection -->
                <div class="section">
                    <h2 class="section-title">Visual Inspection Findings</h2>
                    
                    <h3 class="subsection-title">Evaporator Coil</h3>
                    
                    <div class="form-group">
                        <label>Condition</label>
                        <select name="coilCondition">
                            <option value="">Select...</option>
                            <option value="Clean">Clean</option>
                            <option value="Dusty">Dusty</option>
                            <option value="Microbial Growth">Microbial Growth</option>
                            <option value="Corrosion">Corrosion</option>
                            <option value="Damaged">Damaged</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Severity (1-10, if issue present)</label>
                        <input type="number" name="coilSeverity" min="1" max="10">
                    </div>
                    
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea name="coilNotes" placeholder="Describe specific observations..."></textarea>
                    </div>

                    <h3 class="subsection-title">Blower Assembly</h3>
                    
                    <div class="form-group">
                        <label>Condition</label>
                        <select name="blowerCondition">
                            <option value="">Select...</option>
                            <option value="Clean">Clean</option>
                            <option value="Light Dust">Light Dust</option>
                            <option value="Heavy Buildup">Heavy Buildup</option>
                            <option value="Contaminated">Contaminated</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea name="blowerNotes" placeholder="Describe specific observations..."></textarea>
                    </div>

                    <h3 class="subsection-title">Condensate System</h3>
                    
                    <div class="form-group">
                        <label>Drain Pan Condition</label>
                        <select name="condensateCondition">
                            <option value="">Select...</option>
                            <option value="Clean/Dry">Clean/Dry</option>
                            <option value="Debris Present">Debris Present</option>
                            <option value="Standing Water">Standing Water</option>
                            <option value="Rust/Corrosion">Rust/Corrosion</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Drain Line Status</label>
                        <select name="drainStatus">
                            <option value="">Select...</option>
                            <option value="Clear">Clear</option>
                            <option value="Slow Flow">Slow Flow</option>
                            <option value="Blocked">Blocked</option>
                        </select>
                    </div>

                    <h3 class="subsection-title">Ductwork & Plenum</h3>
                    
                    <div class="form-group">
                        <label>Sealing Condition</label>
                        <select name="ductSealing">
                            <option value="">Select...</option>
                            <option value="Well Sealed">Well Sealed</option>
                            <option value="Minor Leaks">Minor Leaks</option>
                            <option value="Major Leaks">Major Leaks</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Leak Locations (if applicable)</label>
                        <input type="text" name="leakLocations" placeholder="Describe where leaks are located...">
                    </div>
                    
                    <div class="form-group">
                        <label>Additional Visual Observations</label>
                        <textarea name="visualNotes" placeholder="Any other notable findings from visual inspection..."></textarea>
                    </div>
                </div>

                <!-- Safety & Compliance -->
                <div class="section">
                    <h2 class="section-title">Safety & Compliance</h2>
                    
                    <div class="form-group">
                        <label>Safety Items Present</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="safetyCD" name="safety" value="CO Detector Present">
                                <label for="safetyCD">CO Detector</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="safetySmoke" name="safety" value="Smoke Detector Present">
                                <label for="safetySmoke">Smoke Detector</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="safetyClear" name="safety" value="Proper Clearances">
                                <label for="safetyClear">Proper Clearances</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="safetyShutoff" name="safety" value="Emergency Shutoff Accessible">
                                <label for="safetyShutoff">Shutoff Accessible</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Safety Notes / Concerns</label>
                        <textarea name="safetyNotes" placeholder="Document any safety issues or concerns..."></textarea>
                    </div>
                </div>

                <!-- Diagnostic Assessment -->
                <div class="section">
                    <h2 class="section-title">Diagnostic Assessment</h2>
                    
                    <div class="form-group">
                        <label>Primary Complaint (Customer's Words) <span class="required">*</span></label>
                        <textarea name="primaryComplaint" required placeholder="What did the customer tell you about the problem?"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Observable Symptoms</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="symptomCool" name="symptoms" value="Insufficient cooling/heating">
                                <label for="symptomCool">Insufficient cooling/heating</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="symptomNoAir" name="symptoms" value="No airflow">
                                <label for="symptomNoAir">No airflow</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="symptomWeak" name="symptoms" value="Weak airflow">
                                <label for="symptomWeak">Weak airflow</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="symptomNoise" name="symptoms" value="Strange noises">
                                <label for="symptomNoise">Strange noises</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="symptomOdor" name="symptoms" value="Odors">
                                <label for="symptomOdor">Odors</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="symptomIce" name="symptoms" value="Ice formation">
                                <label for="symptomIce">Ice formation</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="symptomLeak" name="symptoms" value="Water leaks">
                                <label for="symptomLeak">Water leaks</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Root Cause Analysis (Your Assessment) <span class="required">*</span></label>
                        <textarea name="rootCause" required placeholder="What is causing the problem? Be specific."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Contributing Factors</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="factorAirflow" name="factors" value="Restricted airflow">
                                <label for="factorAirflow">Restricted airflow</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="factorRefrig" name="factors" value="Refrigerant issue">
                                <label for="factorRefrig">Refrigerant issue</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="factorElec" name="factors" value="Electrical problem">
                                <label for="factorElec">Electrical problem</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="factorMech" name="factors" value="Mechanical failure">
                                <label for="factorMech">Mechanical failure</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="factorInstall" name="factors" value="Installation deficiency">
                                <label for="factorInstall">Installation deficiency</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="factorMaint" name="factors" value="Maintenance neglect">
                                <label for="factorMaint">Maintenance neglect</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- System Scoring -->
                <div class="section">
                    <h2 class="section-title">System Scoring</h2>
                    <p style="color: #666; margin-bottom: 20px; font-size: 14px;">Rate each category from 1 (critical failure) to 10 (excellent condition)</p>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Safety <span class="required">*</span></label>
                            <input type="number" name="scoreSafety" min="1" max="10" required placeholder="1-10">
                        </div>
                        <div class="form-group">
                            <label>Mechanical Performance <span class="required">*</span></label>
                            <input type="number" name="scoreMechanical" min="1" max="10" required placeholder="1-10">
                        </div>
                        <div class="form-group">
                            <label>Indoor Air Quality <span class="required">*</span></label>
                            <input type="number" name="scoreIAQ" min="1" max="10" required placeholder="1-10">
                        </div>
                        <div class="form-group">
                            <label>Energy Efficiency <span class="required">*</span></label>
                            <input type="number" name="scoreEfficiency" min="1" max="10" required placeholder="1-10">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Overall System Health <span class="required">*</span></label>
                        <input type="number" name="scoreOverall" min="1" max="10" required placeholder="1-10">
                    </div>
                </div>

                <!-- Recommendations -->
                <div class="section">
                    <h2 class="section-title">Recommendations</h2>
                    
                    <h3 class="subsection-title">Immediate / Critical</h3>
                    <div class="form-group">
                        <label>Safety risks or imminent system failure items</label>
                        <textarea name="recommendImmediate" placeholder="List critical items that need immediate attention..."></textarea>
                    </div>

                    <h3 class="subsection-title">Corrective (Performance Restoration)</h3>
                    <div class="form-group">
                        <label>Items needed to restore proper function</label>
                        <textarea name="recommendCorrective" placeholder="List repairs needed to restore system performance..."></textarea>
                    </div>

                    <h3 class="subsection-title">Preventive / Enhancement</h3>
                    <div class="form-group">
                        <label>Long-term protection and upgrade opportunities</label>
                        <textarea name="recommendPreventive" placeholder="List preventive measures and optional upgrades..."></textarea>
                    </div>
                </div>

                <!-- Customer Interaction -->
                <div class="section">
                    <h2 class="section-title">Customer Interaction</h2>
                    
                    <div class="form-group">
                        <label>Options Presented & Discussed</label>
                        <textarea name="optionsPresented" placeholder="What options did you present to the customer?"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Customer Decision</label>
                        <select name="customerDecision">
                            <option value="">Select...</option>
                            <option value="Approved All">Approved All</option>
                            <option value="Approved Partial">Approved Partial</option>
                            <option value="Declined">Declined</option>
                            <option value="Wants to Think">Wants to Think About It</option>
                            <option value="Requested Quote">Requested Quote</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Customer Questions / Concerns</label>
                        <textarea name="customerConcerns" placeholder="Document any questions or concerns the customer raised..."></textarea>
                    </div>
                </div>

                <!-- Work Performed -->
                <div class="section">
                    <h2 class="section-title">Work Performed Today</h2>
                    
                    <div class="form-group">
                        <label>Work Completed</label>
                        <textarea name="workPerformed" placeholder="List all work completed during this visit..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Parts Used</label>
                        <input type="text" name="partsUsed" placeholder="List parts used with quantities...">
                    </div>
                    
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Time on Site (hours)</label>
                            <input type="number" name="hoursOnSite" step="0.25" placeholder="e.g., 2">
                        </div>
                        <div class="form-group">
                            <label>Time on Site (minutes)</label>
                            <input type="number" name="minutesOnSite" step="5" placeholder="e.g., 30">
                        </div>
                    </div>
                </div>

                <!-- Additional Notes -->
                <div class="section">
                    <h2 class="section-title">Additional Notes</h2>
                    
                    <div class="form-group">
                        <label>General Observations & Follow-up Items</label>
                        <textarea name="additionalNotes" placeholder="Any additional observations, follow-up items, or important details..."></textarea>
                    </div>
                </div>
            </form>
        </div>

        <div class="action-buttons">
            <button type="button" class="btn-secondary" onclick="saveProgress()">Save Progress</button>
            <button type="button" class="btn-primary" onclick="generateReport()">Complete Call & Export</button>
        </div>
    </div>

    <script>
        let formData = {};

        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date();
            const dateInput = document.querySelector('input[name="date"]');
            const timeInput = document.querySelector('input[name="timeArrived"]');
            
            if (dateInput && !dateInput.value) {
                dateInput.value = today.toISOString().split('T')[0];
            }
            
            if (timeInput && !timeInput.value) {
                const hours = String(today.getHours()).padStart(2, '0');
                const minutes = String(today.getMinutes()).padStart(2, '0');
                timeInput.value = `${hours}:${minutes}`;
            }

            loadProgress();
            setupAutoCalculations();
        });

        function setupAutoCalculations() {
            const returnTemp = document.querySelector('input[name="returnTemp"]');
            const supplyTemp = document.querySelector('input[name="supplyTemp"]');
            const tempSplit = document.querySelector('input[name="tempSplit"]');

            function calcSplit() {
                if (returnTemp.value && supplyTemp.value) {
                    const split = Math.abs(parseFloat(returnTemp.value) - parseFloat(supplyTemp.value));
                    tempSplit.value = split.toFixed(1);
                }
            }

            if (returnTemp && supplyTemp && tempSplit) {
                returnTemp.addEventListener('input', calcSplit);
                supplyTemp.addEventListener('input', calcSplit);
            }
        }

        function saveProgress() {
            const form = document.getElementById('fieldBuddyForm');
            const data = new FormData(form);
            
            formData = {};
            for (let [key, value] of data.entries()) {
                if (formData[key]) {
                    if (Array.isArray(formData[key])) {
                        formData[key].push(value);
                    } else {
                        formData[key] = [formData[key], value];
                    }
                } else {
                    formData[key] = value;
                }
            }

            alert('Progress saved! Data will persist during this session.');
        }

        function loadProgress() {
            if (Object.keys(formData).length > 0) {
                const form = document.getElementById('fieldBuddyForm');
                Object.keys(formData).forEach(key => {
                    const input = form.querySelector(`[name="${key}"]`);
                    if (input) {
                        if (input.type === 'checkbox') {
                            if (Array.isArray(formData[key])) {
                                const checkboxes = form.querySelectorAll(`[name="${key}"]`);
                                checkboxes.forEach(cb => {
                                    if (formData[key].includes(cb.value)) {
                                        cb.checked = true;
                                    }
                                });
                            } else {
                                input.checked = formData[key] === input.value;
                            }
                        } else {
                            input.value = formData[key];
                        }
                    }
                });
            }
        }

        function generateReport() {
            const form = document.getElementById('fieldBuddyForm');
            
            if (!form.checkValidity()) {
                alert('Please fill in all required fields before completing the call.');
                form.reportValidity();
                return;
            }

            const data = new FormData(form);
            let report = "FIELD BUDDY DATA CAPTURE REPORT\n";
            report += "=".repeat(70) + "\n\n";
            
            report += "JOB CONTEXT\n";
            report += "-".repeat(70) + "\n";
            report += `Date: ${data.get('date')}\n`;
            report += `Time Arrived: ${data.get('timeArrived')}\n`;
            report += `Technician: ${data.get('techName')}\n`;
            report += `Customer: ${data.get('customerName')}\n`;
            report += `Address: ${data.get('address')}\n`;
            if (data.get('accountNumber')) report += `Account Number: ${data.get('accountNumber')}\n`;
            report += `Ambient Conditions: ${data.get('ambientTemp') || 'N/A'}Â°F, ${data.get('ambientRH') || 'N/A'}% RH\n`;
            
            const callTypes = data.getAll('callType');
            report += `Call Type: ${callTypes.join(', ') || 'Not specified'}\n\n`;

            report += "EQUIPMENT IDENTIFICATION\n";
            report += "-".repeat(70) + "\n";
            report += "Indoor Unit:\n";
            report += `  Manufacturer: ${data.get('indoorMfg') || 'Not recorded'}\n`;
            report += `  Model: ${data.get('indoorModel') || 'Not recorded'}\n`;
            report += `  Serial: ${data.get('indoorSerial') || 'Not recorded'}\n`;
            report += `  Tonnage: ${data.get('tonnage') || 'Not recorded'} tons\n`;
            report += `  Filter Size: ${data.get('filterSize') || 'Not recorded'}\n`;
            report += "\nOutdoor Unit:\n";
            report += `  Manufacturer: ${data.get('outdoorMfg') || 'Not recorded'}\n`;
            report += `  Model: ${data.get('outdoorModel') || 'Not recorded'}\n`;
            report += `  Serial: ${data.get('outdoorSerial') || 'Not recorded'}\n`;
            report += `  Refrigerant Type: ${data.get('refrigerantType') || 'Not recorded'}\n\n`;

            report += "SYSTEM PERFORMANCE DATA\n";
            report += "-".repeat(70) + "\n";
            report += "Airflow & Static Pressure:\n";
            report += `  Return Static: ${data.get('returnStatic') || 'N/A'} in. w.c.\n`;
            report += `  Supply Static: ${data.get('supplyStatic') || 'N/A'} in. w.c.\n`;
            report += `  Total Static: ${data.get('totalStatic') || 'N/A'} in. w.c.\n`;
            report += `  Filter Condition: ${data.get('filterCondition') || 'Not recorded'}\n`;
            report += `  Blower Amps: ${data.get('blowerAmps') || 'N/A'} A (Rated: ${data.get('blowerAmpsRated') || 'N/A'} A)\n`;
            
            report += "\nRefrigerant Circuit:\n";
            report += `  Suction Pressure: ${data.get('suctionPressure') || 'N/A'} psig\n`;
            report += `  Head Pressure: ${data.get('headPressure') || 'N/A'} psig\n`;
            report += `  Suction Line Temp: ${data.get('suctionTemp') || 'N/A'}Â°F\n`;
            report += `  Liquid Line Temp: ${data.get('liquidTemp') || 'N/A'}Â°F\n`;
            report += `  Superheat: ${data.get('superheat') || 'N/A'}Â°F\n`;
            report += `  Subcool: ${data.get('subcool') || 'N/A'}Â°F\n`;
            report += `  Compressor Amps: ${data.get('compAmps') || 'N/A'} A (Rated: ${data.get('compAmpsRated') || 'N/A'} A)\n`;
            
            report += "\nTemperature Performance:\n";
            report += `  Return Air: ${data.get('returnTemp') || 'N/A'}Â°F\n`;
            report += `  Supply Air: ${data.get('supplyTemp') || 'N/A'}Â°F\n`;
            report += `  Temperature Split: ${data.get('tempSplit') || 'N/A'}Â°F\n\n`;

            report += "VISUAL INSPECTION FINDINGS\n";
            report += "-".repeat(70) + "\n";
            report += "Evaporator Coil:\n";
            report += `  Condition: ${data.get('coilCondition') || 'Not recorded'}\n`;
            if (data.get('coilSeverity')) report += `  Severity: ${data.get('coilSeverity')}/10\n`;
            if (data.get('coilNotes')) report += `  Notes: ${data.get('coilNotes')}\n`;
            
            report += `\nBlower Assembly:\n`;
            report += `  Condition: ${data.get('blowerCondition') || 'Not recorded'}\n`;
            if (data.get('blowerNotes')) report += `  Notes: ${data.get('blowerNotes')}\n`;
            
            report += `\nCondensate System:\n`;
            report += `  Pan Condition: ${data.get('condensateCondition') || 'Not recorded'}\n`;
            report += `  Drain Line: ${data.get('drainStatus') || 'Not recorded'}\n`;
            
            report += `\nDuctwork & Plenum:\n`;
            report += `  Sealing: ${data.get('ductSealing') || 'Not recorded'}\n`;
            if (data.get('leakLocations')) report += `  Leak Locations: ${data.get('leakLocations')}\n`;
            
            if (data.get('visualNotes')) {
                report += `\nAdditional Visual Observations:\n${data.get('visualNotes')}\n`;
            }
            report += "\n";

            report += "SAFETY & COMPLIANCE\n";
            report += "-".repeat(70) + "\n";
            const safetyItems = data.getAll('safety');
            if (safetyItems.length > 0) {
                report += "Safety Items Present:\n";
                safetyItems.forEach(item => report += `  - ${item}\n`);
            } else {
                report += "No safety items documented\n";
            }
            if (data.get('safetyNotes')) {
                report += `Notes: ${data.get('safetyNotes')}\n`;
            }
            report += "\n";

            report += "DIAGNOSTIC ASSESSMENT\n";
            report += "-".repeat(70) + "\n";
            report += `Primary Complaint (Customer's Words):\n${data.get('primaryComplaint')}\n\n`;
            
            const symptoms = data.getAll('symptoms');
            if (symptoms.length > 0) {
                report += "Observable Symptoms:\n";
                symptoms.forEach(s => report += `  - ${s}\n`);
                report += "\n";
            }
            
            report += `Root Cause Analysis:\n${data.get('rootCause')}\n\n`;
            
            const factors = data.getAll('factors');
            if (factors.length > 0) {
                report += "Contributing Factors:\n";
                factors.forEach(f => report += `  - ${f}\n`);
                report += "\n";
            }

            report += "SYSTEM SCORING (1-10 scale)\n";
            report += "-".repeat(70) + "\n";
            report += `Safety: ${data.get('scoreSafety')}/10\n`;
            report += `Mechanical Performance: ${data.get('scoreMechanical')}/10\n`;
            report += `Indoor Air Quality: ${data.get('scoreIAQ')}/10\n`;
            report += `Energy Efficiency: ${data.get('scoreEfficiency')}/10\n`;
            report += `Overall System Health: ${data.get('scoreOverall')}/10\n\n`;

            report += "RECOMMENDATIONS\n";
            report += "-".repeat(70) + "\n";
            if (data.get('recommendImmediate')) {
                report += "IMMEDIATE / CRITICAL:\n";
                report += data.get('recommendImmediate') + "\n\n";
            }
            if (data.get('recommendCorrective')) {
                report += "CORRECTIVE (Performance Restoration):\n";
                report += data.get('recommendCorrective') + "\n\n";
            }
            if (data.get('recommendPreventive')) {
                report += "PREVENTIVE / ENHANCEMENT:\n";
                report += data.get('recommendPreventive') + "\n\n";
            }

            report += "CUSTOMER INTERACTION\n";
            report += "-".repeat(70) + "\n";
            if (data.get('optionsPresented')) {
                report += `Options Presented:\n${data.get('optionsPresented')}\n\n`;
            }
            report += `Customer Decision: ${data.get('customerDecision') || 'Not recorded'}\n`;
            if (data.get('customerConcerns')) {
                report += `Customer Questions/Concerns:\n${data.get('customerConcerns')}\n`;
            }
            report += "\n";

            report += "WORK PERFORMED TODAY\n";
            report += "-".repeat(70) + "\n";
            if (data.get('workPerformed')) {
                report += data.get('workPerformed') + "\n\n";
            }
            if (data.get('partsUsed')) {
                report += `Parts Used: ${data.get('partsUsed')}\n`;
            }
            const hours = data.get('hoursOnSite') || '0';
            const minutes = data.get('minutesOnSite') || '0';
            report += `Time on Site: ${hours} hours ${minutes} minutes\n\n`;

            if (data.get('additionalNotes')) {
                report += "ADDITIONAL NOTES\n";
                report += "-".repeat(70) + "\n";
                report += data.get('additionalNotes') + "\n\n";
            }

            report += "=".repeat(70) + "\n";
            report += "END OF REPORT - Ready for LLM Processing\n";
            report += "=".repeat(70) + "\n";

            downloadReport(report, data.get('customerName'), data.get('date'));
        }

        function downloadReport(content, customerName, date) {
            const sanitizedName = customerName.replace(/[^a-z0-9]/gi, '_');
            const filename = `FieldBuddy_${sanitizedName}_${date}.txt`;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert(`Report generated successfully!\n\nFile: ${filename}\n\nYou can now submit this file to the Field Buddy LLM for final processing.`);
        }
    </script>
</body>
</html>
